.\" Text automatically generated by txt2man
.TH oo-admin-repair 8 "26 September 2014" "" ""
.RS
oo-admin-repair
.SH SYNOPSIS
.nf
.fam C
\fBoo-admin-repair\fP [\fB-h\fP|\fB--help\fP] [\fB-v\fP|\fB--verbose\fP] [\fB-r\fP|\fB--report-only\fP] 
[\fB--consumed-gears\fP] [\fB--ssh-keys\fP] [\fB--district-uids\fP] [\fB--removed-nodes\fP]
[\fB--gear-sizes\fP]

.fam T
.fi
.fam T
.fi
.SH DESCRIPTION
This utility checks and fixes various inconsistencies in mongo data
.PP
The following issues can be fixed with this script:
.RS
.IP \(bu 3
mismatch between user's consumed gears and actual gears
across all domains/applications for the user
.IP \(bu 3
mismatch between the ssh keys in mongo and the ssh keys
on the gear on the node
.IP \(bu 3
mismatch in available UIDs for a district and actual
UIDs used by the gears on the nodes within the district
.IP \(bu 3
apps due to server node down/decommissioned
.IP \(bu 3
domains containing invalid gear sizes in their allowed
gear sizes list
.IP \(bu 3
users containing invalid gear sizes in their capabilities
.SH OPTIONS
\fB-r\fP|\fB--report-only\fP
Only report the mismatches, don't fix them
.TP
.B
\fB--consumed-gears\fP
Fix mismatch in user's consumed gears vs actual gears 
in mongo
.TP
.B
\fB--ssh-keys\fP
Fix mismatch in SSH keys between mongo and on the node 
for a gear
.TP
.B
\fB--district-uids\fP
Fix mismatch in available UIDs for a district in mongo
.TP
.B
\fB--removed-nodes\fP
Fix or cleanup apps due to server node down/decommissioned
.TP
.B
\fB--gear-sizes\fP
Fix gear sizes in domains users and to remove invalid gear sizes
.TP
.B
\fB-h\fP|\fB--help\fP
Display a simple help dialog.
.TP
.B
\fB-v\fP|\fB--verbose\fP
Enable verbose output during the run of the script
.SH EXAMPLE

$ \fBoo-admin-repair\fP \fB--consumed-gears\fP
.SH HINTS
If there are no data discrepancies, this command should exit 
with return code 0. Otherwise the discrepancies are listed 
and the command exits with return code 1. 
If \fB--report-only\fP option is not specified, then the 
inconsistencies in the areas specified by the options 
will be fixed. 
.SH SEE ALSO
\fBoo-admin-ctl-district\fP(8), \fBoo-admin-move\fP(8),
\fBoo-admin-chk\fP(8), \fBoo-accept-broker\fP(8), \fBoo-admin-ctl-app\fP(8),
\fBoo-admin-ctl-domain\fP(8), \fBoo-admin-usage\fP(8), 
\fBoo-admin-ctl-user\fP(8), \fBoo-register-dns\fP(8)
.SH AUTHOR
Adam Miller <admiller@redhat.com> - man page written for 
OpenShift Origin 
